name: Environment 

on: [push, pull_request]

jobs:
  build-and-test:
    runs-on: ubuntu-latest

    steps:
      - name: Checkout repository
        uses: actions/checkout@v4

      # This step creates the .env.development file
      - name: Create .env file for development
        run: |
          echo "SERVICES_URL=${{ secrets.SERVICES_URL }}" >> .env.development
          echo "SERVICES_KEY=${{ secrets.SERVICES_KEY }}" >> .env.development
        # This makes the variables available to subsequent steps
        env:
          SERVICES_URL: ${{ secrets.SERVICES_URL }}
          SERVICES_KEY: ${{ secrets.SERVICES_KEY }
      
      - name: Install dependencies
        run: npm install # or yarn install, etc.

      - name: Run tests
        run: npm test # This command can now access the variables

      # ... other steps like build, lint, etc
